<template>
    <style>

        .show-map{
            padding: 15px;
        }

        #map { 
            height: 300px;
/*            max-width: 75vw; */
        }

        #layer{
            cursor: pointer;
            text-align: end;
        }

         #layer:hover{
            color: blue;
         }

    </style>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>

    <fieldset class="show-map">
        <legend>Mapa</legend>
        <div id="map"></div>
        <div id="layer">View Sat</div>
    </fieldset>

    <fieldset>
        <legend>Altimetria</legend>
        <div id="chart_div" style="width: 100%;"></div>

    </fieldset>

</template>
<script>

    const pageData = main_data.post_track.data
    const pageFunc = main_data.post_track.func
    const pageScreen = document.querySelector('#card-post_track')

  

    function pageStart(){

        getFile(pageData.file).then((resp)=>{
            pageData.gps = JSON.parse(resp)

            loadMap([pageData.gps.points[0].lat,pageData.gps.points[0].lon])
            drawTrack(pageData.gps.points)
            drawAlt(pageData)

        })

    }

    pageScreen.querySelector('#layer').addEventListener('click',()=>{
        if(map.layer.name == 'sat'){
            pageScreen.querySelector('#layer').innerHTML = 'View Sat'
        }else{
            pageScreen.querySelector('#layer').innerHTML = 'View Map'
        }
        setLayer(map.layer.name == 'map' ? 'sat' : 'map')
    })

    pageStart()

</script>